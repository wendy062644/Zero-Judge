#include<bits/stdc++.h>
using namespace std;

class Struct{
	public:
		int core;
		int ram;
		int mb;
};

int main()
{
	int n = 0, d = 0, m = 0, zero = 0;
	cin >> n >> d;
	vector<Struct> times(d*24);
	for(int a = 0; n > a; a++)
	{
		if(a > 0){
			for(int d = 0; times.size() >= d; d++)
			{
				times[d].core = 0;
				times[d].ram = 0;
				times[d].mb = 0;
			}
		}
		int mcore = 0, mram = 0, mmb = 0;
		long long core = 0, ram = 0, mb = 0;
		cin >> m;
		for(int b = 0; m > b; b++)
		{
			int D = 0, S = 0, E = 0;
			cin >> D >> S >> E >> core >> ram >> mb; 
			int st = (D-1)*24+S;
			for(int c = 0; E > c; c++)
			{
				if(st+c >= 24*d)
				{
					st -= 24*d;
				} 
				times[st+c].core += core;
				times[st+c].ram += ram;
				times[st+c].mb += mb;
			}
		}
		
		for(int b = 0; times.size() > b; b++)
		{
			mcore = max(mcore, times[b].core);
			mram = max(mram, times[b].ram);
			mmb = max(mmb, times[b].mb);
		}
		cout << mcore << " " << mram << " " << mmb << endl;
		cin >> zero;
	}
	return 0;
}
